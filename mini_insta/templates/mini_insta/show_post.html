<!-- # File: show_post.html
# Author: Leigh Brown (ljbrown@bu.edu), 2/12/2026 + 2/24/2026
# Description: scriptlet code to display an individual post in the database and the associated data -->

{% extends 'mini_insta/base.html' %}
 
{% block content %}

<main class="container">
    <div class="double2">
        <div class="imgside2">
            {% if post.get_all_photos %}
                    {% for a in post.get_all_photos %}
                        <img class="post-page-image" src="{{a.get_image_url}}">
                    {% endfor %}
            {% endif%}
        </div>
         <!-- showcase post info-->
        <div class="post-info">
            <div style="display: flex; gap: 30px; align-items: center;">
                <h4> {{post.profile.display_name}}</h4> 
                <p> @{{post.profile.username}} </p>
            </div>
            <hr>
            <br>
            {% if post.caption %}
                <p> <b>@{{post.profile.username}}: </b>{{post.caption}}</p>
            {% endif %}

            <p style="color:rgb(167, 167, 167)"> timestamp: {{post.timestamp}}</p>

            {%if post.get_likes %}
                <div style="display: flex; gap: 5px; align-items: center;">
                    {% with a=post.get_first_like %}
                        <p> Liked by <b>{{a.profile.username}}</b></p>
                    {% endwith %}

                    {%if post.get_num_likes >= 1 %}
                        <p> <b> and {{post.get_num_likes}} others</b></p>
                    {% endif %}
                </div>
            {% endif %}

            <br>
            {% for c in post.get_all_comments%}
                <div style="display: flex; gap: 30px; align-items: center;">
                    <h5><b>@{{c.profile.username}}</b></h5>
                    <p>{{c.text}}</p>
                </div>
            {% endfor %}
        </div>
    </div>
        <br>

    <div style="display: flex; justify-content: flex-start; gap: 15px; margin: auto; margin-top: 15px;">
        <a href="{% url 'delete_post' post.pk %}"><button class="submit-btn"> delete post</button></a>
        <a href="{% url 'update_post' post.pk %}"><button class="submit-btn"> update post</button></a>
     </div>
</main>
{% endblock %}
 